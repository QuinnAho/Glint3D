{
  "description": "Task-specific AI constraints layered on top of /.ai.json",
  "layering": [
    {
      "description": "Engine Core isolation - no UI dependencies",
      "from": "engine/src/render/**",
      "disallow_imports": ["platforms/**", "ui/**", "sdk/**", "imgui/**", "glfw/**"]
    },
    {
      "description": "RHI abstraction enforcement", 
      "from": "engine/src/**",
      "disallow_patterns": ["gl[A-Z].*\\(", "glfw[A-Z].*\\("],
      "allow_exceptions": ["engine/src/rhi/rhi_gl.cpp"]
    },
    {
      "description": "Shader compatibility",
      "from": "engine/shaders/**",
      "require_patterns": ["#version 330 core", "// WebGL2: auto-translated"],
      "disallow_patterns": ["#extension.*GL_ARB", "gl_.*\\[gl_.*\\]"]
    }
  ],
  "edit_scope": [
    "engine/src/render/**",
    "engine/src/rhi/**", 
    "engine/include/glint3d/**",
    "engine/shaders/**",
    "tests/**",
    "docs/**",
    "ai/tasks/FEAT-0241/**"
  ],
  "constraints": {
    "max_files_per_edit": 5,
    "require_tests_for_new_apis": true,
    "require_docs_for_public_headers": true,
    "preserve_existing_behavior": "opaque materials must render identically",
    "performance_budget": "frame_time_ms <= 16.0 at 1080p"
  },
  "validation": {
    "golden_tests_required": true,
    "ssim_threshold": 0.995,
    "cross_platform_check": true
  }
}