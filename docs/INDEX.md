# Glint3D Documentation

This directory contains source files for Glint3D's documentation system.

## Structure

```
docs/
├── README.md              # This file
├── Doxyfile              # Doxygen configuration (symlink to ../Doxyfile)
├── DoxygenLayout.xml     # Doxygen layout customization
├── TASKS.md              # Auto-generated task module documentation
├── generate-docs.bat     # Windows documentation generation script
├── generate-docs.sh      # Linux/macOS documentation generation script
└── api/                  # Generated output (gitignored)
    └── html/             # HTML documentation
```

## Local Generation

### Prerequisites
- **Doxygen** 1.9.0+ ([download](https://www.doxygen.nl/download.html))
- **Graphviz** (optional, for diagrams) ([download](https://graphviz.org/download/))
- **Python** 3.x (for task documentation generation)

### Generate Documentation

**Windows:**
```bash
docs\generate-docs.bat
```

**Linux/macOS:**
```bash
chmod +x docs/generate-docs.sh
./docs/generate-docs.sh
```

Documentation will be generated to `docs/api/html/`. Open `docs/api/html/index.html` in your browser.

## GitHub Pages Deployment

Documentation is automatically published to GitHub Pages when changes are pushed to `main`.

### Setup (One-time)

1. Go to your repository **Settings** → **Pages**
2. Under **Source**, select:
   - Source: `GitHub Actions`
3. Push changes to trigger the workflow
4. Docs will be available at: `https://<username>.github.io/Glint3D/`

### Manual Deployment

You can manually trigger documentation deployment:
1. Go to **Actions** tab
2. Select **Deploy Documentation** workflow
3. Click **Run workflow** → **Run workflow**

### What Gets Published

- API documentation for all public headers
- Task module system documentation
- Architecture guides and examples

## Auto-Generated Files

**Do not edit these files manually:**
- `TASKS.md` - Generated by `tools/generate-task-docs.py`
- Files in `api/` directory - Generated by Doxygen

## Customization

### Doxygen Configuration
Edit the root `Doxyfile` to change:
- Project name/version (`PROJECT_NAME`, `PROJECT_NUMBER`)
- Input files (`INPUT`, `RECURSIVE`)
- Output formats (`GENERATE_HTML`, `GENERATE_LATEX`)
- Graph generation (`HAVE_DOT`, `CALL_GRAPH`)

### Layout Customization
Edit `DoxygenLayout.xml` to modify:
- Navigation tabs
- Page structure
- Section ordering

### Task Documentation
The task module documentation is auto-generated from `ai/tasks/`. To update:

```bash
python tools/generate-task-docs.py
```

This regenerates `TASKS.md` from the current task index.

## Troubleshooting

### Workflow Fails

**Check:**
1. GitHub Pages is enabled in repository settings
2. Workflow has `pages: write` permission
3. No conflicting deployments running

**View logs:**
- Go to **Actions** tab → Select failed workflow → View logs

### Missing Sections

If documentation sections are missing:
1. Check `INPUT` paths in `Doxyfile`
2. Verify files aren't in `.gitignore`
3. Ensure headers have Doxygen comments (`///` or `/** */`)

### Graphs Not Generated

Install Graphviz and ensure `HAVE_DOT = YES` in `Doxyfile`:
```bash
# Ubuntu/Debian
sudo apt-get install graphviz

# macOS
brew install graphviz

# Windows
choco install graphviz
```

## Documentation Style Guide

### Header Documentation

Use Doxygen-style comments:

```cpp
/**
 * @brief Brief description of the class/function
 *
 * Detailed description with more context.
 * Can span multiple lines.
 *
 * @param paramName Description of parameter
 * @return Description of return value
 */
```

### Task Module Documentation

Tasks are documented in `ai/tasks/<task_name>/`:
- `task.json` - Metadata and acceptance criteria
- `checklist.md` - Implementation checklist
- `README.md` - Task overview (optional)

The generator reads these files and produces structured documentation.

## Links

- **Live Docs**: https://[username].github.io/Glint3D/ (after setup)
- **Doxygen Manual**: https://www.doxygen.nl/manual/
- **GitHub Pages Docs**: https://docs.github.com/en/pages
