{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Glint3D JSON Operations v2",
  "description": "Intent-based operations schema for AI-maintainable Glint3D interactions",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "const": "2.0",
      "description": "Schema version"
    },
    "operations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Operation"
      }
    }
  },
  "required": ["version", "operations"],
  "definitions": {
    "Operation": {
      "type": "object",
      "properties": {
        "intent": {
          "type": "string",
          "enum": [
            "load_model",
            "duplicate_object", 
            "remove_object",
            "set_object_transform",
            "set_object_material",
            "add_light",
            "update_light",
            "remove_light",
            "set_camera",
            "set_camera_preset",
            "render",
            "render_to_file",
            "get_scene",
            "import_scene",
            "export_scene",
            "set_background"
          ]
        },
        "params": {
          "type": "object",
          "additionalProperties": true
        },
        "metadata": {
          "type": "object",
          "properties": {
            "description": {"type": "string"},
            "tags": {"type": "array", "items": {"type": "string"}},
            "timestamp": {"type": "string", "format": "date-time"}
          }
        }
      },
      "required": ["intent", "params"]
    },
    "Transform": {
      "type": "object",
      "properties": {
        "position": {"$ref": "#/definitions/Vec3"},
        "rotation": {"$ref": "#/definitions/Vec3"},
        "scale": {"$ref": "#/definitions/Vec3"}
      }
    },
    "Material": {
      "type": "object",
      "properties": {
        "color": {"$ref": "#/definitions/Vec3"},
        "roughness": {"type": "number", "minimum": 0, "maximum": 1},
        "metallic": {"type": "number", "minimum": 0, "maximum": 1},
        "ior": {"type": "number", "minimum": 1},
        "transmission": {"type": "number", "minimum": 0, "maximum": 1},
        "emissive": {"$ref": "#/definitions/Vec3"}
      }
    },
    "Light": {
      "type": "object",
      "properties": {
        "type": {"type": "string", "enum": ["point", "directional", "spot"]},
        "position": {"$ref": "#/definitions/Vec3"},
        "direction": {"$ref": "#/definitions/Vec3"},
        "color": {"$ref": "#/definitions/Vec3"},
        "intensity": {"type": "number", "minimum": 0},
        "enabled": {"type": "boolean"},
        "innerAngle": {"type": "number"},
        "outerAngle": {"type": "number"}
      },
      "required": ["type", "color", "intensity", "enabled"]
    },
    "Camera": {
      "type": "object",
      "properties": {
        "position": {"$ref": "#/definitions/Vec3"},
        "target": {"$ref": "#/definitions/Vec3"},
        "fov": {"type": "number", "minimum": 1, "maximum": 179},
        "near": {"type": "number", "minimum": 0.001},
        "far": {"type": "number"}
      }
    },
    "Vec3": {
      "type": "array",
      "items": {"type": "number"},
      "minItems": 3,
      "maxItems": 3
    }
  }
}